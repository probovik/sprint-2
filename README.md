### Задание 1

https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=task1.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22Page-1%22%20id%3D%22-H_mtQnk-PTXWXPvYvuk%22%3E7V1dl5s4Ev01%2FWgfCSEhHtvdk9mHyU52k5yZ2Zcc2tA2G9t4AfdHfv0KIzBIoo3HgASdPHSMDDLcKpWqbpXEDbrbvvwae%2Fv1x8gPNjcW8F9u0P2NZUEHAvZf1vLKW4Br5S2rOPR526nhc%2FgjKE7krYfQD5LaiWkUbdJwX29cRrtdsExrbV4cR8%2F10x6jTf1X994qkBo%2BL72N3PpH6Kdr3gqJe%2FriH0G4WvOfppaTf7H1ipP5kyRrz4%2BeK03olxt0F0dRmn%2FavtwFmwy9Apf8ug8N35Y3Fge7tM0F%2B6%2Bh9c8fX5Zhkhx%2BT%2F51%2BLCg%2F5lBfrdP3ubAn5jfbfpaQBBHh50fZL3AG7R4Xodp8HnvLbNvn5nUWds63W7417y7IE6Dl8YbheXjM8UJom2Qxq%2FsFH6BQzliXGcI5sfPFQEUqK4r2BPe5nGZr8quT7CwDxyZC1Ai5oFEQB0kG2EJJEIVICEbX4%2FSj1sLfYy%2BfE2%2BfLC%2FuTClT%2BHXmSWh9DHaraL7hQQWGwr77OPydRMy1GJ0HrKHHN%2FfHsoGb%2Fl9dUT990PKugl4e5KbEIhLnCVQFdA34oxJHWeLyspIFDDTDnRRiTKSUN6%2FbjOcZ94%2B7EItr4ILiXC5A45dJV62hEngMwvPD6M4XUeraOdtfjm1Lk6oAXZ0Oue3KNpzrP4bpOkrn668QxrVkQxewvTPyue%2Fsq7mmB%2Fdv%2FCejwevxcGOPe6f1YPKVdnh6bLjUe26T0EcMryCmDc2ijKJDvEyOK9fqRevgvT8aM%2FAfFMx4mDjpeFTfTrt3EIj2SJPTMxKuM%2BKWA2WLGL1eY5WkfZt6K6af0VDhx1nLs%2FAw7opyNU5CE6K%2F1dV7y8aBNaQo8BpOQy0jgIb6JTpJYZNh2gg1SobqHe8OdUBB1sOOH5VMeaggQPOQldKlV%2F6KQrZPZYmm6K6yXaQYIjzJ%2BBXVSNpoSMIXaEnTDNYa53lTyl1dlS08pmusPUGBu5loF7EpIpYCapiUgt3EJM22%2B4aSsto9xiuPsdP2uFybTh3SB0xWzfVAdFofAh2oA57OrFWdAzegSupNxNFBodu3SaO4B4j7YotYyWhlPFJ%2B8an5xSz91CcDi4e8ahV0KDik0qwugfmInYTdKQ%2Bb8hIhk8jOFQCJ1l7sQ9nsu%2FHHjetI%2BFtwtWOfV6yx85s1CIDJVx6m1v%2BxTb0%2FaMFVUFaB71XVFWTcm8jUYa05InJJkPQD9nkTFbp8anzpodYbGE%2FXTtPEMawFHOXYimyIHieeQjQIbYDMKWoZjksPHegbVFc%2FJWsCCbz%2FEIL4WNHRCFiOse1bnqSeGFRdNpeCKFgfFXe6bDWxZI5Ll2mN%2F9lk0yvZTeZXhkkU01vC1QHNb0W%2Fml735LLFG2vI8nH1IDuxFHpoqistqkRvZkRrTlNgXdsLdPLeEffS9ZlvFoYFGYHvnfMScKWAm9w1gYSeJGHNz7OJ9oJLKQKZ%2FNpaw1rYJH%2FHbLaq8WWyT7czdJsHNyyM8D%2BJZ%2Fr%2BPflPMcU8xbeMOgozj4v8r93x7%2FscQCszI%2FZbzVMj7KzopJTxOTyuDkWjK2ZqxLs%2Fp5bclkW01aVWqk8lP7cPiSHh8esb%2FKtQeUN8P0uGyO2qyjVUlVq9QWx3SIcG7zoTwAJAkd3Ot2%2BKDobBiYsZJ6owt66WIFSObK7h2nyFVYd%2BhtF8eVZf8PW6nDYcpxoVPENFo0FsLRX39hE5zgYW%2FWN7bYcCBioVWGggaA1etZUftNeNvhK2RwvvY1j77Vywj6rmUgqPYt1HJY4%2BoklCDrvstOCC5uaM7xb1%2Fro4lFaa1Be%2F9B5qY8jJFqhZQt9tK%2F1AVjoyhW66rnSp8DSJDe0DPM5KC5QzL7DVvoULoGZpT5IKvWhRLfDgjWXLxpT6oPJKHwRLIftprCAAo3kYu263SJ2773aR%2FJTlFGKMgNoobIyqHts5MTqGxrUa9YZN1T68m5mLCZxaxiC1gACtz8A5ej4VBQE8oTqgwSpATzlRTKojl1bgTCEctFzd3W7skoOOTe18rVnEP%2F9uelNq9XdjEW0LpBwNBcTQ7td1DSz56hJlmU0VYZPHcVSA2nA1TH6daayORtXqSDZM8i97NcmUl5yZlqDWTSAHQyKf1bdT3Dn1JJmOZeyVst2y3%2ByRXbcOexLkERRCBswH8n3eOeTklDmZ9C6UCqzXbXSx50X2bSaXwvnVm9To1wMMGlJAFPlIBMOE5aDWD1rkBw0V0NR3KGTIVC2J8fi4r0fTPA9HK17QpDx8Fv6GXtnMA6sgWdHgqF3HYEbamDsu6LZid6Ic0pFlaRtFW3OaGqzDzJHaCifCoH2ZAFRkYbDlFVa4yurFOpTqKqWbdiySkfmLCUEe1%2BCZYlOJABIAmZwPtwxZwGs00DWmM2HO%2FIuC6eVWqPjw5tkoJcP11t9ookPL%2BA8v1kDaOlxUK0RiaN5g67x8eHda4CjdekWlUmjd8CHn5nWxsiH02mxsGckZDIfXujGe5GEqTwslcPpCcvBXD6c%2FuTDjfU%2BtfJdtAUFMDTTRYubKoYR0c500RHs9g9t1X5qAKlw6m0ZKR3N2hgDFv7RtvsJunpthFzmYdTCP5EYx67%2BhX9Uc1Q%2FroV%2Fxft%2Fzg%2BEa3cBvm5nzfe473Z72VxbVnq89NKFfy4SnQW%2BJKLXhX%2FFci8ThrfxC%2F9aaxCE185zah2htqAjFAl9tF75Z4nrNygVuup55V8BpkmeqIMFfFW7mQy89M%2BVmQdzlv5BYBNx7R%2B0tS%2BQcjWzBMYs%2FoOg9RZgeh0SOXo3pFrFcQSTgG3t2t0ihu%2B92gGI7oo6WBm83sG96NURvdY7uA3L%2F82ud3Df2hR8dPUOTTLQWu%2Fg6o2p2xHYndc7FGarw0kLAq18EgRa4%2Bgxljz0oARXh%2BtX6oCcK38HRQ9n5rYxFj3A4iYnkuM9IyKTqx4gmFa6%2FawoTE23s%2Fj%2BPQnC3LqHcqOun4UP5nkg3Fzpc0FGuDmnNhKfc%2FNDUGIN1LsNRepEpIp6Xg0IgebXZkxoOSAErWsftO5VUt7nCChWoj2BAIFqX8phVgSi0a0ILLNkZQZIVec27JLA0pWbzqsW5FQElOvkBn3XAoQq8kPAtfdUBLKkVIQBCy9LP8OATASX09hSERAqaIDxrr1slILWZASEepPlmrIRpelqETC03T0EQq3L7yDUzBGMLx3RjxboZQOUr7yefELi3BQ3yowEVOw9MGL29ZyMjE5JqF6WPmlZGEuFQzk2n7IkDE5KWJrrHyaTlOjHD9FbGGHJ3MC%2FAz9MJJVhjkiG1yL5HqTLNUfSS%2FbBMnu8x%2FAlU5aqAvClFOxivLjB96oA7zHapVyBWByOFvw37sPtij3NJnzInilZegH7%2F85broNvx3v79imO%2FMMynSdPq45IG1KWRZauBpBpm9J3r45dl8xJb9KRyQjzF37YLqoO0RmYA%2BD0NE47X%2FsImzRlqPEokykjJ0SJQIiW7yTpng9lh3GU8fjld7%2Byh1p%2FjPwgO%2BP%2F%3C%2Fdiagram%3E%3C%2Fmxfile%3E

### Задание 2 (уважаемый проверяющий, у меня мак на М3 не стартует API контейнер, остальное проверил работает суть понял)

Запускаем mongodb и приложение

```shell
docker compose up -d
```

```инициализируйте сервер конфигурации выполнив поочередно команды
docker exec -it configSrv mongosh --port 27017

rs.initiate(
  {
    _id : "config_server",
       configsvr: true,
    members: [
      { _id : 0, host : "configSrv:27017" }
    ]
  }
);

exit();
```

```инициализируйте шарды выполнив поочередно команды
docker exec -it shard1-1 mongosh --port 27018

rs.initiate(
    {
      _id : "shard1-1",
      members: [
        { _id : 0, host : "shard1-1:27018" },
      ]
    }
);

exit();

docker exec -it shard1-2 mongosh --port 27019

rs.initiate(
    {
      _id : "shard1-2",
      members: [
        { _id : 1, host : "shard1-2:27019" }
      ]
    }
  );

exit();
```
 
```инициализируйте роутер и наполните его данными выполнив поочередно команды должно получиться 1000 записей
docker exec -it mongos_router mongosh --port 27020

sh.addShard( "shard1-1/shard1-1:27018");
sh.addShard( "shard1-2/shard1-2:27019");

sh.enableSharding("somedb");
sh.shardCollection("somedb.helloDoc", { "name" : "hashed" } )

use somedb

var docs = [];
for(var i = 0; i < 1000; i++) {
    docs.push({age:i, name:"ly"+i});
}
db.helloDoc.insertMany(docs);

db.helloDoc.countDocuments() 
exit();
```

``` сделайте проверку на первом шарде получится 492 документа
 docker exec -it shard1-1 mongosh --port 27018
 use somedb;
 db.helloDoc.countDocuments();
 exit();
``` 

``` сделайте проверку на втором шарде получится 508 документов
docker exec -it shard1-2 mongosh --port 27019
use somedb;
db.helloDoc.countDocuments();
exit();
``` 

### Задание 3

``` подключаемся к первому шарду и инициализируем реплики
 docker exec -it shard1-1 mongosh --port 27018

rs.initiate({_id: "shard1-1", members: [ {_id: 0, host: "shard1-1:27018"}, {_id: 1, host: "shard1-1replica1:27028"},{_id: 2, host: "shard1-1replica2:27038"}, {_id: 3, host: "shard1-1replica3:27048"}]})
exit();

docker exec -it shard1-2 mongosh --port 27019

rs.initiate({_id: "shard1-2replica", members: [ {_id: 0, host: "shard1-2:27019"}, {_id: 1, host: "shard1-2secondary1:27029"}, {_id: 2, host: "shard1-2secondary2:27039"}, {_id: 3, host: "shard1-2secondary3:27049"}]})

exit();

``` 

### Заданиие 4

``` проверить наличие кластера 
docker exec -it redis_1

echo "yes" | redis-cli --cluster create   173.17.0.2:6379   173.17.0.3:6379   173.17.0.4:6379   173.17.0.5:6379   173.17.0.6:6379   173.17.0.7:6379   --cluster-replicas 1

```

### Заданиие 5


### Заданиие 6